services:
  rag-openclaw:
    container_name: rag-openclaw-direct
    build: .
    image: hosteurdkuser/rag-openclaw:v0.6.0
    init: true
    env_file: .env
    environment:
      - BROWSER=echo
      - HOME=/home/agent
      - TERM=xterm-256color
    volumes:
      - openclaw-state:/home/agent/.openclaw
      - ./workspace:/home/agent/workspace
      - repos:/home/agent/repos
      - ./.ssh-agent:/home/agent/.ssh:ro
    ports:
      - "18789:18789"
      - "18790:18790"
    stdin_open: true
    tty: true
    restart: unless-stopped

  openclaw-cli:
    container_name: openclaw-cli-direct
    image: hosteurdkuser/rag-openclaw:v0.6.0
    init: true
    env_file: .env
    environment:
      - BROWSER=echo
    volumes:
      - openclaw-state:/home/agent/.openclaw
      - ./workspace:/home/agent/workspace
      - repos:/home/agent/repos
      - ./.ssh-agent:/home/agent/.ssh:ro
    stdin_open: true
    tty: true
    entrypoint: ["openclaw"]
    profiles: ["cli"]

volumes:
  openclaw-state:
  repos:
